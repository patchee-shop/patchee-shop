{"ast":null,"code":"import _defineProperty from\"/Users/nikitaspiridonov/Desktop/Patchee Shop/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/nikitaspiridonov/Desktop/Patchee Shop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/nikitaspiridonov/Desktop/Patchee Shop/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"/Users/nikitaspiridonov/Desktop/Patchee Shop/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"categoryName\",\"view\"];import{useState,useContext,useEffect}from'react';import{Context}from'../../Context';import{Link}from'react-router-dom';import Counter from'./Counter';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductCard(_ref){var categoryName=_ref.categoryName,view=_ref.view,props=_objectWithoutProperties(_ref,_excluded);var _useContext=useContext(Context),setCurrentCategory=_useContext.setCurrentCategory,cartItems=_useContext.cartItems,setCartItems=_useContext.setCartItems;var _useState=useState({picture:props.record.fields.Фото[0].url,name:props.record.fields.Название,addition:props.record.fields.Дополнение,price:props.record.fields.Цена,id:props.record.id,triggerPrice:props.record.fields.ТриггерЦена,triggerQuantity:props.record.fields.ТриггерКоличество,remains:props.record.fields.Осталось}),_useState2=_slicedToArray(_useState,2),productCardParams=_useState2[0],setProductCardParams=_useState2[1];var addFirstItem=function addFirstItem(){setCartItems(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},productCardParams.id,1));});};var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),isInCart=_useState4[0],setIsInCart=_useState4[1];useEffect(function(){setCurrentCategory(function(prev){return prev===\"\"?\"all\":categoryName===undefined?prev:categoryName;});},[]);useEffect(function(){setIsInCart(productCardParams.id in cartItems?\"\":\"not-in-cart\");},[cartItems]);return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(view,\" \").concat(isInCart,\" product-card\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper info-wrapper\",children:[/*#__PURE__*/_jsx(Link,{to:process.env.PUBLIC_URL+\"/product_info/\".concat(props.record.id),children:/*#__PURE__*/_jsx(\"img\",{src:productCardParams.picture})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-card--info wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"info--name\",children:productCardParams.name}),/*#__PURE__*/_jsx(\"h3\",{className:\"info--addition\",children:productCardParams.addition})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-card--info wrapper counter-wrapper \".concat(view),children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-card--buttons\",children:view==\"small\"?!cartItems[productCardParams.id]?/*#__PURE__*/_jsx(\"button\",{onClick:addFirstItem,disabled:cartItems[productCardParams.id],className:\"add-to-card\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 16 16\",children:[/*#__PURE__*/_jsx(\"g\",{children:/*#__PURE__*/_jsx(\"g\",{children:/*#__PURE__*/_jsx(\"g\",{children:/*#__PURE__*/_jsx(\"rect\",{width:\"16\",height:\"16\",fill:\"rgba(255,255,255,0)\"})})})}),/*#__PURE__*/_jsxs(\"g\",{transform:\"translate(2 -0.25)\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M15.5,11.25a.4.4,0,0,1,.4.4v1.6a.4.4,0,0,1-.4.4H13.9a.4.4,0,0,1,0-.8h1.2v-1.2A.4.4,0,0,1,15.5,11.25Z\",transform:\"translate(-8.7 -5.8)\",fill:\"#fff\",fillRule:\"evenodd\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M18,16.15a.4.4,0,0,1,.4-.4H20a.4.4,0,1,1,0,.8H18.8v1.2a.4.4,0,0,1-.8,0Z\",transform:\"translate(-11.6 -8.7)\",fill:\"#fff\",fillRule:\"evenodd\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M0,2.65a.4.4,0,0,1,.4-.4H1.6a.4.4,0,0,1,.388.3l.324,1.3H11.6a.4.4,0,0,1,.393.474l-1.2,6.4a.4.4,0,0,1-.393.326H3.2a.4.4,0,0,1-.393-.326l-1.2-6.388L1.288,3.05H.4A.4.4,0,0,1,0,2.65Zm2.481,2,1.05,5.6h6.536l1.05-5.6ZM4,11.05a1.6,1.6,0,1,0,1.6,1.6A1.6,1.6,0,0,0,4,11.05Zm5.6,0a1.6,1.6,0,1,0,1.6,1.6A1.6,1.6,0,0,0,9.6,11.05Zm-5.6.8a.8.8,0,1,0,.8.8A.8.8,0,0,0,4,11.85Zm5.6,0a.8.8,0,1,0,.8.8A.8.8,0,0,0,9.6,11.85Z\",fill:\"#fff\",fillRule:\"evenodd\"})]})]})}):/*#__PURE__*/_jsx(Counter,{recordId:productCardParams.id,remains:productCardParams.remains}):!cartItems[productCardParams.id]?/*#__PURE__*/_jsx(\"button\",{onClick:addFirstItem,disabled:cartItems[productCardParams.id],className:\"add-to-card\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:addFirstItem,disabled:cartItems[productCardParams.id],className:\"add-to-card\",children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0435\"}),/*#__PURE__*/_jsx(Counter,{recordId:productCardParams.id,remains:productCardParams.remains})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"prices-wrapper\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"product-card--price\",children:[cartItems[productCardParams.id]?(!cartItems[productCardParams.id]?1:cartItems[productCardParams.id])>=productCardParams.triggerQuantity?productCardParams.triggerPrice*cartItems[productCardParams.id]:productCardParams.price*cartItems[productCardParams.id]:(!cartItems[productCardParams.id]?1:cartItems[productCardParams.id])>=productCardParams.triggerQuantity?productCardParams.triggerPrice:productCardParams.price,\" \\u20BD\"]}),(!cartItems[productCardParams.id]?1:cartItems[productCardParams.id])>=productCardParams.triggerQuantity&&/*#__PURE__*/_jsxs(\"p\",{className:\"product-card--old-price\",children:[productCardParams.price*(!cartItems[productCardParams.id]?1:cartItems[productCardParams.id]),\" \\u20BD\"]})]})]})]});}","map":{"version":3,"sources":["/Users/nikitaspiridonov/Desktop/Patchee Shop/src/components/elements/ProductCard.js"],"names":["useState","useContext","useEffect","Context","Link","Counter","ProductCard","categoryName","view","props","setCurrentCategory","cartItems","setCartItems","picture","record","fields","Фото","url","name","Название","addition","Дополнение","price","Цена","id","triggerPrice","ТриггерЦена","triggerQuantity","ТриггерКоличество","remains","Осталось","productCardParams","setProductCardParams","addFirstItem","prev","isInCart","setIsInCart","undefined","process","env","PUBLIC_URL"],"mappings":"mkBAAA,OAASA,QAAT,CAAmBC,UAAnB,CAA+BC,SAA/B,KAAgD,OAAhD,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,C,6IAEA,cAAe,SAASC,CAAAA,WAAT,MAAqD,IAA/BC,CAAAA,YAA+B,MAA/BA,YAA+B,CAAjBC,IAAiB,MAAjBA,IAAiB,CAARC,KAAQ,0CAEhE,gBAAsDR,UAAU,CAACE,OAAD,CAAhE,CAAOO,kBAAP,aAAOA,kBAAP,CAA2BC,SAA3B,aAA2BA,SAA3B,CAAsCC,YAAtC,aAAsCA,YAAtC,CACA,cAAkDZ,QAAQ,CAAC,CACvDa,OAAO,CAAEJ,KAAK,CAACK,MAAN,CAAaC,MAAb,CAAoBC,IAApB,CAAyB,CAAzB,EAA4BC,GADkB,CAEvDC,IAAI,CAAET,KAAK,CAACK,MAAN,CAAaC,MAAb,CAAoBI,QAF6B,CAGvDC,QAAQ,CAAEX,KAAK,CAACK,MAAN,CAAaC,MAAb,CAAoBM,UAHyB,CAIvDC,KAAK,CAAEb,KAAK,CAACK,MAAN,CAAaC,MAAb,CAAoBQ,IAJ4B,CAKvDC,EAAE,CAAEf,KAAK,CAACK,MAAN,CAAaU,EALsC,CAMvDC,YAAY,CAAEhB,KAAK,CAACK,MAAN,CAAaC,MAAb,CAAoBW,WANqB,CAOvDC,eAAe,CAAElB,KAAK,CAACK,MAAN,CAAaC,MAAb,CAAoBa,iBAPkB,CAQvDC,OAAO,CAAEpB,KAAK,CAACK,MAAN,CAAaC,MAAb,CAAoBe,QAR0B,CAAD,CAA1D,wCAAOC,iBAAP,eAA0BC,oBAA1B,eAUA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvBrB,YAAY,CAAC,SAAAsB,IAAI,wCAENA,IAFM,wBAGRH,iBAAiB,CAACP,EAHV,CAGe,CAHf,IAAL,CAAZ,CAMH,CAPD,CAQA,eAAgCxB,QAAQ,CAAC,EAAD,CAAxC,yCAAOmC,QAAP,eAAiBC,WAAjB,eAEAlC,SAAS,CAAC,UAAM,CACZQ,kBAAkB,CACd,SAAAwB,IAAI,QAAIA,CAAAA,IAAI,GAAK,EAAT,CAAa,KAAb,CACR3B,YAAY,GAAK8B,SAAjB,CAA4BH,IAA5B,CACA3B,YAFI,EADU,CAAlB,CAKH,CANQ,CAMN,EANM,CAAT,CAOAL,SAAS,CAAC,UAAM,CACZkC,WAAW,CAACL,iBAAiB,CAACP,EAAlB,GAAwBb,CAAAA,SAAxB,CAAmC,EAAnC,CAAwC,aAAzC,CAAX,CACH,CAFQ,CAEN,CAACA,SAAD,CAFM,CAAT,CAIA,mBACI,aAAK,SAAS,WAAKH,IAAL,aAAa2B,QAAb,iBAAd,wBACI,aAAK,SAAS,CAAC,sBAAf,wBACI,KAAC,IAAD,EAAM,EAAE,CAAEG,OAAO,CAACC,GAAR,CAAYC,UAAZ,yBAA0C/B,KAAK,CAACK,MAAN,CAAaU,EAAvD,CAAV,uBACI,YAAK,GAAG,CAAEO,iBAAiB,CAAClB,OAA5B,EADJ,EADJ,cAII,aAAK,SAAS,CAAC,4BAAf,wBACI,WAAI,SAAS,CAAC,YAAd,UAA4BkB,iBAAiB,CAACb,IAA9C,EADJ,cAEI,WAAI,SAAS,CAAC,gBAAd,UAAgCa,iBAAiB,CAACX,QAAlD,EAFJ,GAJJ,GADJ,cAUI,aAAK,SAAS,sDAAgDZ,IAAhD,CAAd,wBACI,YAAK,SAAS,CAAC,uBAAf,UACKA,IAAI,EAAI,OAAR,CACG,CAACG,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAV,cACI,eAAQ,OAAO,CAAES,YAAjB,CAA+B,QAAQ,CAAEtB,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAlD,CAA0E,SAAS,CAAC,aAApF,uBACI,aAAK,KAAK,CAAC,IAAX,CAAgB,MAAM,CAAC,IAAvB,CAA4B,OAAO,CAAC,WAApC,wBACI,gCACI,gCACI,gCACI,aAAM,KAAK,CAAC,IAAZ,CAAiB,MAAM,CAAC,IAAxB,CAA6B,IAAI,CAAC,qBAAlC,EADJ,EADJ,EADJ,EADJ,cAQI,WAAG,SAAS,CAAC,oBAAb,wBACI,aAAM,CAAC,CAAC,sGAAR,CAA+G,SAAS,CAAC,sBAAzH,CAAgJ,IAAI,CAAC,MAArJ,CAA4J,QAAQ,CAAC,SAArK,EADJ,cAEI,aAAM,CAAC,CAAC,yEAAR,CAAkF,SAAS,CAAC,uBAA5F,CAAoH,IAAI,CAAC,MAAzH,CAAgI,QAAQ,CAAC,SAAzI,EAFJ,cAGI,aAAM,CAAC,CAAC,sZAAR,CAA+Z,IAAI,CAAC,MAApa,CAA2a,QAAQ,CAAC,SAApb,EAHJ,GARJ,GADJ,EADJ,cAkBI,KAAC,OAAD,EACI,QAAQ,CAAEO,iBAAiB,CAACP,EADhC,CAEI,OAAO,CAAEO,iBAAiB,CAACF,OAF/B,EAnBP,CAwBG,CAAClB,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAV,cACI,eAAQ,OAAO,CAAES,YAAjB,CAA+B,QAAQ,CAAEtB,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAlD,CAA0E,SAAS,CAAC,aAApF,gHADJ,cAGI,wCACA,eAAQ,OAAO,CAAES,YAAjB,CAA+B,QAAQ,CAAEtB,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAlD,CAA0E,SAAS,CAAC,aAApF,+DADA,cAEA,KAAC,OAAD,EACI,QAAQ,CAAEO,iBAAiB,CAACP,EADhC,CAEI,OAAO,CAAEO,iBAAiB,CAACF,OAF/B,EAFA,GA5BZ,EADJ,cAsCI,aAAK,SAAS,CAAC,gBAAf,wBACI,WAAG,SAAS,CAAC,qBAAb,WACMlB,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAT,CACE,CAAC,CAACb,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAV,CAAkC,CAAlC,CAAsCb,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAhD,GAA2EO,iBAAiB,CAACJ,eAA7F,CACII,iBAAiB,CAACN,YAAlB,CAAiCd,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAD9C,CAEIO,iBAAiB,CAACT,KAAlB,CAA0BX,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAHzC,CAIM,CAAC,CAACb,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAV,CAAkC,CAAlC,CAAsCb,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAhD,GAA2EO,iBAAiB,CAACJ,eAA7F,CACAI,iBAAiB,CAACN,YADlB,CAEAM,iBAAiB,CAACT,KAP9B,aADJ,CAYQ,CAAC,CAACX,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAV,CAAkC,CAAlC,CAAsCb,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAhD,GAA2EO,iBAAiB,CAACJ,eAA7F,eAEA,WAAG,SAAS,CAAC,yBAAb,WACKI,iBAAiB,CAACT,KAAlB,EAA2B,CAACX,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAAV,CAAkC,CAAlC,CAAsCb,SAAS,CAACoB,iBAAiB,CAACP,EAAnB,CAA1E,CADL,aAdR,GAtCJ,GAVJ,GADJ,CAuEH","sourcesContent":["import { useState, useContext, useEffect } from 'react'\nimport { Context } from '../../Context'\nimport { Link } from 'react-router-dom'\nimport Counter from './Counter'\n\nexport default function ProductCard({categoryName, view, ...props}) {\n\n    const {setCurrentCategory, cartItems, setCartItems} = useContext(Context)\n    const [productCardParams, setProductCardParams] = useState({\n        picture: props.record.fields.Фото[0].url,\n        name: props.record.fields.Название,\n        addition: props.record.fields.Дополнение,\n        price: props.record.fields.Цена,\n        id: props.record.id,\n        triggerPrice: props.record.fields.ТриггерЦена,\n        triggerQuantity: props.record.fields.ТриггерКоличество,\n        remains: props.record.fields.Осталось\n    })\n    const addFirstItem = () => {\n        setCartItems(prev => (\n            {\n                ...prev,\n                [productCardParams.id]: 1\n            }\n        ))\n    }\n    const [isInCart, setIsInCart] = useState(\"\")\n\n    useEffect(() => {\n        setCurrentCategory (\n            prev => prev === \"\"? \"all\" :\n            categoryName === undefined? prev :\n            categoryName\n        )\n    }, [])\n    useEffect(() => {\n        setIsInCart(productCardParams.id in cartItems? \"\" : \"not-in-cart\")\n    }, [cartItems])\n\n    return (\n        <div className={`${view} ${isInCart} product-card`}>\n            <div className='wrapper info-wrapper'>\n                <Link to={process.env.PUBLIC_URL + `/product_info/${props.record.id}`}>\n                    <img src={productCardParams.picture}/>\n                </Link>\n                <div className='product-card--info wrapper'>\n                    <h2 className='info--name'>{productCardParams.name}</h2>\n                    <h3 className='info--addition'>{productCardParams.addition}</h3>\n                </div>\n            </div>\n            <div className={`product-card--info wrapper counter-wrapper ${view}`}>\n                <div className='product-card--buttons'>\n                    {view == \"small\"?\n                        !cartItems[productCardParams.id]?\n                            <button onClick={addFirstItem} disabled={cartItems[productCardParams.id]} className='add-to-card'>\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n                                    <g>\n                                        <g>\n                                            <g>\n                                                <rect width=\"16\" height=\"16\" fill=\"rgba(255,255,255,0)\"/>\n                                            </g>\n                                        </g>\n                                    </g>\n                                    <g transform=\"translate(2 -0.25)\">\n                                        <path d=\"M15.5,11.25a.4.4,0,0,1,.4.4v1.6a.4.4,0,0,1-.4.4H13.9a.4.4,0,0,1,0-.8h1.2v-1.2A.4.4,0,0,1,15.5,11.25Z\" transform=\"translate(-8.7 -5.8)\" fill=\"#fff\" fillRule=\"evenodd\"/>\n                                        <path d=\"M18,16.15a.4.4,0,0,1,.4-.4H20a.4.4,0,1,1,0,.8H18.8v1.2a.4.4,0,0,1-.8,0Z\" transform=\"translate(-11.6 -8.7)\" fill=\"#fff\" fillRule=\"evenodd\"/>\n                                        <path d=\"M0,2.65a.4.4,0,0,1,.4-.4H1.6a.4.4,0,0,1,.388.3l.324,1.3H11.6a.4.4,0,0,1,.393.474l-1.2,6.4a.4.4,0,0,1-.393.326H3.2a.4.4,0,0,1-.393-.326l-1.2-6.388L1.288,3.05H.4A.4.4,0,0,1,0,2.65Zm2.481,2,1.05,5.6h6.536l1.05-5.6ZM4,11.05a1.6,1.6,0,1,0,1.6,1.6A1.6,1.6,0,0,0,4,11.05Zm5.6,0a1.6,1.6,0,1,0,1.6,1.6A1.6,1.6,0,0,0,9.6,11.05Zm-5.6.8a.8.8,0,1,0,.8.8A.8.8,0,0,0,4,11.85Zm5.6,0a.8.8,0,1,0,.8.8A.8.8,0,0,0,9.6,11.85Z\" fill=\"#fff\" fillRule=\"evenodd\"/>\n                                    </g>\n                                </svg>\n                            </button>\n                        :\n                            <Counter\n                                recordId={productCardParams.id}\n                                remains={productCardParams.remains}\n                            />\n                    :\n                        !cartItems[productCardParams.id]?\n                            <button onClick={addFirstItem} disabled={cartItems[productCardParams.id]} className='add-to-card'>Добавить в корзину</button>\n                        :\n                            <>\n                            <button onClick={addFirstItem} disabled={cartItems[productCardParams.id]} className='add-to-card'>В корзине</button>\n                            <Counter\n                                recordId={productCardParams.id}\n                                remains={productCardParams.remains}\n                            />\n                            </>\n                    }\n                </div>\n                <div className='prices-wrapper'>\n                    <p className='product-card--price'>\n                        { cartItems[productCardParams.id]?\n                            (!cartItems[productCardParams.id]? 1 : cartItems[productCardParams.id]) >= productCardParams.triggerQuantity?\n                                productCardParams.triggerPrice * cartItems[productCardParams.id] :\n                                productCardParams.price * cartItems[productCardParams.id] :\n                                (!cartItems[productCardParams.id]? 1 : cartItems[productCardParams.id]) >= productCardParams.triggerQuantity?\n                                productCardParams.triggerPrice :\n                                productCardParams.price\n                        } ₽\n                    </p>\n                    {\n                        (!cartItems[productCardParams.id]? 1 : cartItems[productCardParams.id]) >= productCardParams.triggerQuantity\n                        &&\n                        <p className='product-card--old-price'>\n                            {productCardParams.price * (!cartItems[productCardParams.id]? 1 : cartItems[productCardParams.id])} ₽\n                        </p>\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}